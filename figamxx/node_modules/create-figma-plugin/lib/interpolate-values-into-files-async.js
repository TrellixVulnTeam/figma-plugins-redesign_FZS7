"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.interpolateValuesIntoFilesAsync = void 0;
const fs_extra_1 = require("fs-extra");
const globby = require("globby");
const mustache = require("mustache");
const path_1 = require("path");
const isUtf8 = require('is-utf8');
async function interpolateValuesIntoFilesAsync(directory, values) {
    const filePaths = await globby('**/*', {
        cwd: directory,
        dot: true
    });
    await Promise.all(filePaths.map(async function (filePath) {
        const absolutePath = path_1.join(directory, filePath);
        const buffer = await fs_extra_1.readFile(absolutePath);
        const fileContents = isUtf8(buffer)
            ? interpolate(buffer.toString(), values)
            : buffer;
        return fs_extra_1.outputFile(absolutePath, fileContents);
    }));
}
exports.interpolateValuesIntoFilesAsync = interpolateValuesIntoFilesAsync;
function interpolate(string, values) {
    return mustache.render(string, values);
}
//# sourceMappingURL=interpolate-values-into-files-async.js.map