/** @jsx h */
import classnames from '@sindresorhus/class-names';
import { h } from 'preact';
import { useCallback } from 'preact/hooks';
import { ENTER_KEY_CODE, ESCAPE_KEY_CODE } from '../../utilities/key-codes';
import { checkIcon } from '../icon/icons/check-icon';
import styles from './selectable-item.scss';
export function SelectableItem({ bold, children, disabled, indent, name, onChange, onKeyDown, propagateEscapeKeyDown = true, value, ...rest }) {
    const handleChange = useCallback(function (event) {
        const newValue = !(value === true);
        onChange({ [name]: newValue }, newValue, name, event);
    }, [name, onChange, value]);
    const handleKeyDown = useCallback(function (event) {
        switch (event.keyCode) {
            case ESCAPE_KEY_CODE: {
                if (propagateEscapeKeyDown === false) {
                    event.stopPropagation();
                }
                ;
                event.target.blur();
                break;
            }
            case ENTER_KEY_CODE: {
                event.stopPropagation();
                const newValue = !(value === true);
                onChange({ [name]: newValue }, newValue, name, event);
                break;
            }
        }
        if (typeof onKeyDown === 'function') {
            onKeyDown(event);
        }
    }, [name, value, onChange, onKeyDown, propagateEscapeKeyDown]);
    return (h("label", Object.assign({}, rest, { class: classnames(styles.label, disabled === true ? styles.disabled : null, bold === true ? styles.bold : null, indent === true ? styles.indent : null, value === true ? styles.checked : null), onKeyDown: disabled === true ? undefined : handleKeyDown, tabIndex: disabled === true ? undefined : 0 }),
        h("input", Object.assign({}, rest, { checked: value === true, class: styles.input, disabled: disabled === true, name: name, onChange: handleChange, tabIndex: -1, type: "checkbox" })),
        h("div", { class: styles.text }, children),
        value === true ? h("div", { class: styles.icon }, checkIcon) : null));
}
//# sourceMappingURL=selectable-item.js.map