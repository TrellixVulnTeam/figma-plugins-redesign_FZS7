{"code":"!function(n){var t={};function e(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return n[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}e.m=n,e.c=t,e.d=function(n,t,o){e.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:o})},e.r=function(n){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(n,\"__esModule\",{value:!0})},e.t=function(n,t){if(1&t&&(n=e(n)),8&t)return n;if(4&t&&\"object\"==typeof n&&n&&n.__esModule)return n;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:n}),2&t&&\"string\"!=typeof n)for(var r in n)e.d(o,r,function(t){return n[t]}.bind(null,r));return o},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,\"a\",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p=\"\",e(e.s=25)}({14:function(n,t,e){\"use strict\";e.d(t,\"a\",(function(){return o}));const o={combineSingleLayerGroups:!0,groupDefinition:1,horizontalSpace:100,verticalSpace:50}},16:function(n,t,e){\"use strict\";e.r(t),e.d(t,\"on\",(function(){return c})),e.d(t,\"once\",(function(){return u})),e.d(t,\"emit\",(function(){return a}));const o=\"undefined\"==typeof window,r={};let i=0;function c(n,t){const e=\"\"+i++;return r[e]={eventHandler:t,eventName:n},function(){delete r[e]}}function u(n,t){let e=!1;return c(n,(function(...n){!0!==e&&(e=!0,t(...n))}))}const a=!0===o?function(...n){figma.ui.postMessage(n)}:function(...n){window.parent.postMessage({pluginMessage:n},\"*\")};function f(n,t){for(const e in r)r[e].eventName===n&&r[e].eventHandler.apply(null,t)}!0===o?figma.ui.onmessage=function([n,...t]){f(n,t)}:window.onmessage=function(n){const[t,...e]=n.data.pluginMessage;f(t,e)}},19:function(n,t,e){\"use strict\";e.r(t);var o=e(42),r=e(16);var i=e(14);const c=/\\//g;function u(n){let t=1;return n.forEach((function({name:n}){const e=n.match(c);null!==e&&(t=Math.max(t,e.length))})),t}function a(n,t,e){if(!0!==n.removed){if(\"children\"in n&&(\"function\"!=typeof e||!1===e(n)))for(const o of n.children)a(o,t,e);t(n)}}function f(n){let t=!1;return a(n,(function(n){\"expanded\"in n&&!0===n.expanded&&(n.expanded=!1,t=!0)})),t}var s=e(9);function l(n,t,e,o,r){const i=Object(s.a)(n,t,e);!function(n,t,e){let o=0;for(const r of n){let n=0,i=0;for(const{id:t}of r.layers){const r=figma.getNodeById(t);r.x=o,r.y=n,n=r.y+r.height+e,i=Math.max(i,r.width)}o+=i+t}}(i,o,r),function(n){const t=[];for(const e of n.slice().reverse())for(const n of e.layers.slice().reverse())t.push(n);!function(n){const t=n[0].parent;if(null===t)throw new Error(\"Node has no parent\");if(!1===function(n){if(n.length<2)return!0;const[t,...e]=n;if(null===t.parent)return!1;const o=t.parent.id;for(const n of e)if(null===n.parent||n.parent.id!==o)return!1;return!0}(n))throw new Error(\"Nodes do not have the same parent\");const e=n.slice(),o=t.children.map((function({id:n}){return n})),r=function(n,t){let e=-1;return n.forEach((function(n){const o=t.indexOf(n.id);o>e&&(e=o)})),e+1}(e,o);e.forEach((function(n){t.insertChild(r,n)})),function(n,t){if(n.length!==t.length)return!1;for(const e in n)if(n[e]!==t[e])return!1}(o,t.children.map((function({id:n}){return n})))}(t)}(i),function(n){for(const t of n)f(t)}(n)}var d=function(n,t,e,o){return new(e||(e=Promise))((function(r,i){function c(n){try{a(o.next(n))}catch(n){i(n)}}function u(n){try{a(o.throw(n))}catch(n){i(n)}}function a(n){var t;n.done?r(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(c,u)}a((o=o.apply(n,t||[])).next())}))};t.default=function(){return d(this,void 0,void 0,(function*(){const n=g();if(0===n.length)return void figma.closePlugin((t=\"No layers on page\",\"✘   \"+t));var t;const e=yield Object(o.a)(i.a);figma.on(\"selectionchange\",(function(){const n=g();Object(r.emit)(\"SELECTION_CHANGED\",{layers:n,maximumGroupDefinition:u(n)})})),Object(r.once)(\"SUBMIT\",(function(n){return d(this,void 0,void 0,(function*(){yield Object(o.b)(n);const{combineSingleLayerGroups:t,groupDefinition:e,horizontalSpace:r,verticalSpace:i}=n,c=figma.currentPage.children.slice();var u,a,f;l(c,t,e,r,i),figma.viewport.scrollAndZoomIntoView(c),function(n,t,e){const o=(null==e?void 0:e.description)||\"\";n.setRelaunchData({[t]:o})}(figma.currentPage,\"organizeLayers\"),figma.closePlugin(function(n){return\"✔   \"+n}(\"Organized \"+c.length+\" \"+(u=c.length,a=\"layer\",(1===u?a:void 0===f?a+\"s\":f)+\" on page\")))}))})),Object(r.once)(\"CLOSE_UI\",(function(){figma.closePlugin()})),function(n,t={}){if(\"undefined\"==typeof __html__)throw new Error(\"No UI defined\");const e='\\n    <div id=\"create-figma-plugin\"></div>\\n    <script>\\n      const __FIGMA_COMMAND__ = \\''+figma.command+\"';\\n      const __SHOW_UI_DATA__ = \"+JSON.stringify(t)+\";\\n      \"+__html__+\"\\n    <\\/script>\\n  \";figma.showUI(e,n)}({height:361,width:240},Object.assign(Object.assign({},e),{layers:n,maximumGroupDefinition:u(n)}))}))};function g(){return function(n,t){const e=[];for(const o of n){const n={};for(const e of t){const t=o[e];n[e]=void 0===t||\"\"===o[e]?null:t}e.push(n)}return e}(figma.currentPage.children.slice(),[\"id\",\"name\"])}},25:function(n,t,e){e(16);({\"organize-layers/main--default\":e(19).default,\"reset-plugin/main--default\":e(26).default,organizeLayers:e(19).default})[\"\"===figma.command?\"organize-layers/main--default\":figma.command]()},26:function(n,t,e){\"use strict\";e.r(t);var o=e(42),r=e(14),i=function(n,t,e,o){return new(e||(e=Promise))((function(r,i){function c(n){try{a(o.next(n))}catch(n){i(n)}}function u(n){try{a(o.throw(n))}catch(n){i(n)}}function a(n){var t;n.done?r(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(c,u)}a((o=o.apply(n,t||[])).next())}))};t.default=function(){return i(this,void 0,void 0,(function*(){yield Object(o.b)(r.a),figma.closePlugin(\"Reset plugin\")}))}},4:function(n,t){var e=function(n,t){var e,o,r=1,i=0,c=0,u=String.alphabet;function a(n,t,o){if(o){for(e=t;(o=a(n,e))<76&&o>65;)++e;return+n.slice(t-1,e)}return(o=u&&u.indexOf(n.charAt(t)))>-1?o+76:(o=n.charCodeAt(t)||0)<45||o>127?o:o<46?65:o<48?o-1:o<58?o+18:o<65?o-11:o<91?o+11:o<97?o-37:o<123?o+5:o-63}if((n+=\"\")!=(t+=\"\"))for(;r;)if(o=a(n,i++),r=a(t,c++),o<76&&r<76&&o>66&&r>66&&(o=a(n,i,i),r=a(t,c,i=e),c=e),o!=r)return o<r?-1:1;return 0};try{n.exports=e}catch(n){String.naturalCompare=e}},42:function(n,t,e){\"use strict\";e.d(t,\"a\",(function(){return r})),e.d(t,\"b\",(function(){return i}));const o=\"settings\";async function r(n){const t=await figma.clientStorage.getAsync(o);return void 0===t?n:Object.assign(n,t)}async function i(n){await figma.clientStorage.setAsync(o,n)}},8:function(n,t,e){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.extractGroupName=void 0,t.extractGroupName=function(n,t){if(\"/\"===n)return\"/\";const e=(\"/\"===(r=n)[r.length-1]?r.substring(0,r.length-1):r).split(o);var r;return 1===e.length?n:e.length<=t?e.slice(0,e.length-1).join(\"/\"):e.slice(0,t).join(\"/\")};const o=/\\//},9:function(n,t,e){\"use strict\";e.d(t,\"a\",(function(){return c}));var o=e(4),r=e.n(o);var i=e(8);function c(n,t,e){const o={};for(const t of(c=n,c.length<2?c.slice():c.slice().sort((function(n,t){const e=n.name.toLowerCase(),o=t.name.toLowerCase();if(e!==o)return r()(o,e);const i=t.y-n.y;if(0!==i)return i;const c=t.x-n.x;return 0!==c?c:r()(t.id,n.id)}))).reverse()){const n=Object(i.extractGroupName)(t.name,e);void 0===o[n]&&(o[n]={groupName:n,layers:[]}),o[n].layers.push(t)}var c;if(!1===t||function(n){let t=0;for(const e in n){1===n[e].layers.length&&t++}return t}(o)<2)return Object.values(o);const u=[],a={groupName:null,layers:[]};for(const n in o){const t=o[n];1!==t.layers.length?u.push(t):a.layers.push(t.layers[0])}return[a,...u]}}});","name":"main.js","input":"/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 25);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 14:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return defaultSettings; });\nconst defaultSettings = {\n  combineSingleLayerGroups: true,\n  groupDefinition: 1,\n  horizontalSpace: 100,\n  verticalSpace: 50\n};\n\n/***/ }),\n\n/***/ 16:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"on\", function() { return on; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"once\", function() { return once; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"emit\", function() { return emit; });\nconst isCommand = typeof window === 'undefined';\nconst eventHandlers = {};\nlet currentId = 0;\n/**\n * Registers an `eventHandler` for the given `eventName`.\n *\n * @returns Returns a function for deregistering the `eventHandler`.\n * @category Events\n */\n\nfunction on(eventName, eventHandler) {\n  const id = \"\" + currentId++;\n  eventHandlers[id] = {\n    eventHandler,\n    eventName\n  };\n  return function () {\n    delete eventHandlers[id];\n  };\n}\n/**\n * Registers an `eventHandler` that will run at most once for the given\n * `eventName`.\n *\n * @returns Returns a function for deregistering the `eventHandler`.\n * @category Events\n */\n\nfunction once(eventName, eventHandler) {\n  let done = false;\n  return on(eventName, function (...args) {\n    if (done === true) {\n      return;\n    }\n\n    done = true;\n    eventHandler(...args);\n  });\n}\n/**\n * Calling `emit` in the main context invokes the event handler for the\n * matching `eventName` in your UI. Correspondingly, calling `emit` in your\n * UI invokes the event handler for the matching `eventName` in the main\n * context.\n *\n * All `args` passed after `eventName` will be directly applied on the\n * event handler.\n *\n * @category Events\n */\n\nconst emit = isCommand === true ? function (...args) {\n  figma.ui.postMessage(args);\n} : function (...args) {\n  window.parent.postMessage({\n    pluginMessage: args\n  }, '*');\n};\n\nfunction invokeEventHandler(eventName, args) {\n  for (const id in eventHandlers) {\n    if (eventHandlers[id].eventName === eventName) {\n      eventHandlers[id].eventHandler.apply(null, args);\n    }\n  }\n}\n\nif (isCommand === true) {\n  figma.ui.onmessage = function ([eventName, ...args]) {\n    invokeEventHandler(eventName, args);\n  };\n} else {\n  window.onmessage = function (event) {\n    const [eventName, ...args] = event.data.pluginMessage;\n    invokeEventHandler(eventName, args);\n  };\n}\n\n/***/ }),\n\n/***/ 19:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: /Users/zhangruisheng/Desktop/figamxx/node_modules/@create-figma-plugin/utilities/lib/string.js\nconst CHECK = '✔';\nconst CROSS = '✘';\nconst WARNING = '⚠';\nconst SPACE = '\\u00a0';\n/**\n * Adds a `✔` prefix to the given `message`.\n *\n * @category String\n */\n\nfunction formatSuccessMessage(message) {\n  return CHECK + \" \" + SPACE + \" \" + message;\n}\n/**\n * Adds a `✘` prefix to the given `message`.\n *\n * @category String\n */\n\nfunction formatErrorMessage(message) {\n  return CROSS + \" \" + SPACE + \" \" + message;\n}\n/**\n * Adds a `⚠` prefix to the given `message`.\n *\n * @category String\n */\n\nfunction formatWarningMessage(message) {\n  return WARNING + \" \" + SPACE + \" \" + message;\n}\n/**\n * Returns `singular` if `number` is exactly `1`, else returns `plural`.\n * `plural` defaults to `${singular}s` if not specified.\n *\n * @category String\n */\n\nfunction pluralize(number, singular, plural) {\n  if (number === 1) {\n    return singular;\n  }\n\n  return typeof plural === 'undefined' ? singular + \"s\" : plural;\n}\n// EXTERNAL MODULE: /Users/zhangruisheng/Desktop/figamxx/node_modules/@create-figma-plugin/utilities/lib/settings.js\nvar lib_settings = __webpack_require__(42);\n\n// EXTERNAL MODULE: /Users/zhangruisheng/Desktop/figamxx/node_modules/@create-figma-plugin/utilities/lib/events.js\nvar events = __webpack_require__(16);\n\n// CONCATENATED MODULE: /Users/zhangruisheng/Desktop/figamxx/node_modules/@create-figma-plugin/utilities/lib/nodes/set-relaunch-button.js\n/**\n * Sets a [relaunch button](https://figma.com/plugin-docs/api/properties/nodes-setrelaunchdata/)\n * on `node` for the command with the given `relaunchButtonId` as configured\n * under [**`\"relaunchButtons\"`**](/docs/configuration.md#relaunchbuttons) in\n * `package.json`. `description` is the text displayed below the relaunch\n * button in the Figma UI.\n *\n * See the [recipe for configuring relaunch buttons](/docs/recipes/relaunch-buttons.md#readme).\n *\n * @category Node\n */\nfunction setRelaunchButton(node, relaunchButtonId, options) {\n  const description = (options === null || options === void 0 ? void 0 : options.description) || '';\n  node.setRelaunchData({\n    [relaunchButtonId]: description\n  });\n}\n// CONCATENATED MODULE: /Users/zhangruisheng/Desktop/figamxx/node_modules/@create-figma-plugin/utilities/lib/ui.js\n/* global __html__ */\nconst CLOSING_SLASH = '/';\n/**\n * Renders the UI correponding to the command in a modal within the Figma UI.\n * Specify the width, height, and visibility of the UI via `options`.\n * Optionally pass on some initialising `data` from the command to the UI.\n *\n * See the [recipe for adding a UI to a plugin command](/docs/recipes/ui.md#readme).\n *\n * @category UI\n */\n\nfunction showUI(options, data = {}) {\n  if (typeof __html__ === 'undefined') {\n    throw new Error('No UI defined');\n  }\n\n  const html = \"\\n    <div id=\\\"create-figma-plugin\\\"></div>\\n    <script>\\n      const __FIGMA_COMMAND__ = '\" + figma.command + \"';\\n      const __SHOW_UI_DATA__ = \" + JSON.stringify(data) + \";\\n      \" + __html__ + \"\\n    <\" + CLOSING_SLASH + \"script>\\n  \";\n  figma.showUI(html, options);\n}\n// CONCATENATED MODULE: /Users/zhangruisheng/Desktop/figamxx/node_modules/@create-figma-plugin/utilities/lib/object.js\n/**\n * Creates a deep copy of the given object.\n *\n * @category Object\n */\nfunction cloneObject(object) {\n  const type = typeof object;\n\n  if (object === null || type === 'boolean' || type === 'number' || type === 'string' || type === 'undefined') {\n    return object;\n  }\n\n  if (Array.isArray(object)) {\n    return object.map(function (value) {\n      return cloneObject(value);\n    });\n  }\n\n  const result = {};\n\n  for (const key in object) {\n    result[key] = cloneObject(object[key]);\n  }\n\n  return result;\n}\n/**\n * Performs a *shallow* comparison of arrays `a` and `b`.\n *\n * @returns Returns `true` if `a` and `b` are the same, else `false`.\n * @category Object\n */\n\nfunction compareArrays(a, b) {\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  for (const index in a) {\n    if (a[index] !== b[index]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n/**\n * Performs a *deep* comparison of objects `a` and `b`.\n *\n * @returns Returns `true` if `a` and `b` are the same, else `false`.\n * @category Object\n */\n\nfunction compareObjects(a, b) {\n  const type = typeof a;\n\n  if (a === null || type === 'boolean' || type === 'number' || type === 'string' || type === 'undefined') {\n    return a === b;\n  }\n\n  if (Array.isArray(a)) {\n    if (Array.isArray(b) === false) {\n      return false;\n    }\n\n    if (a.length !== b.length) {\n      return false;\n    }\n\n    let result = true;\n    a.forEach(function (value, index) {\n      if (result === true && compareObjects(value, b[index]) === false) {\n        result = false;\n      }\n    });\n    return result;\n  }\n\n  if (typeof b !== 'object') {\n    return false;\n  }\n\n  if (Object.keys(a).length !== Object.keys(b).length) {\n    return false;\n  }\n\n  for (const key in a) {\n    if (compareObjects(a[key], b[key]) === false) {\n      return false;\n    }\n  }\n\n  return true;\n}\n/**\n * Extracts the specified list of `attributes` from the given `array` of\n * objects.\n *\n * @returns Returns an array of plain objects.\n * @category Object\n */\n\nfunction extractAttributes(array, attributes) {\n  const result = [];\n\n  for (const object of array) {\n    const item = {};\n\n    for (const attribute of attributes) {\n      const value = object[attribute];\n      item[attribute] = typeof value === 'undefined' || object[attribute] === '' ? null : value;\n    }\n\n    result.push(item);\n  }\n\n  return result;\n}\n// EXTERNAL MODULE: ./src/utilities/default-settings.js\nvar default_settings = __webpack_require__(14);\n\n// CONCATENATED MODULE: ./src/organize-layers/utilities/compute-maximum-group-definition.js\nconst slashRegex = /\\//g;\nfunction computeMaximumGroupDefinition(layers) {\n  let maximum = 1;\n  layers.forEach(function ({\n    name\n  }) {\n    const matches = name.match(slashRegex);\n\n    if (matches !== null) {\n      maximum = Math.max(maximum, matches.length);\n    }\n  });\n  return maximum;\n}\n// CONCATENATED MODULE: /Users/zhangruisheng/Desktop/figamxx/node_modules/@create-figma-plugin/utilities/lib/nodes/are-sibling-nodes.js\n/**\n * Checks if all nodes in `nodes` are sibling nodes.\n *\n * @returns Returns `true` if all nodes in `nodes` are sibling nodes,\n * else `false`.\n * @category Node\n */\nfunction areSiblingNodes(nodes) {\n  if (nodes.length < 2) {\n    return true;\n  }\n\n  const [firstNode, ...rest] = nodes;\n\n  if (firstNode.parent === null) {\n    return false;\n  }\n\n  const parentId = firstNode.parent.id;\n\n  for (const node of rest) {\n    if (node.parent === null || node.parent.id !== parentId) {\n      return false;\n    }\n  }\n\n  return true;\n}\n// CONCATENATED MODULE: /Users/zhangruisheng/Desktop/figamxx/node_modules/@create-figma-plugin/utilities/lib/nodes/sort-nodes/update-nodes-sort-order.js\n\n\n/**\n * Updates the layer list sort order to follow the sort order of the nodes\n * in the `siblingNodes` array.\n *\n * @category Node\n */\n\nfunction updateNodesSortOrder(siblingNodes) {\n  const parent = siblingNodes[0].parent;\n\n  if (parent === null) {\n    throw new Error('Node has no parent');\n  }\n\n  if (areSiblingNodes(siblingNodes) === false) {\n    throw new Error('Nodes do not have the same parent');\n  }\n\n  const copy = siblingNodes.slice();\n  const ids = parent.children.map(function ({\n    id\n  }) {\n    return id;\n  });\n  const insertIndex = computeInsertIndex(copy, ids);\n  copy.forEach(function (node) {\n    parent.insertChild(insertIndex, node);\n  });\n  const idsAfter = parent.children.map(function ({\n    id\n  }) {\n    return id;\n  });\n  return compareArrays(ids, idsAfter) === false;\n}\n\nfunction computeInsertIndex(nodes, ids) {\n  let insertIndex = -1;\n  nodes.forEach(function (node) {\n    const index = ids.indexOf(node.id);\n\n    if (index > insertIndex) {\n      insertIndex = index;\n    }\n  });\n  return insertIndex + 1;\n}\n// CONCATENATED MODULE: /Users/zhangruisheng/Desktop/figamxx/node_modules/@create-figma-plugin/utilities/lib/nodes/traverse-node.js\n/**\n * Traverses `node` and its child nodes recursively in a *depth-first*\n * manner, passing each node to the specified `processNode` callback.\n *\n * Each node is also passed to a `stopTraversal` function. If you return\n * `false` in `stopTraversal` for a particular node, then its child nodes\n * will not be traversed.\n *\n * @category Node\n */\nfunction traverseNode(node, processNode, stopTraversal) {\n  if (node.removed === true) {\n    return;\n  }\n\n  if ('children' in node && (typeof stopTraversal !== 'function' || stopTraversal(node) === false)) {\n    for (const childNode of node.children) {\n      traverseNode(childNode, processNode, stopTraversal);\n    }\n  }\n\n  processNode(node);\n}\n// CONCATENATED MODULE: /Users/zhangruisheng/Desktop/figamxx/node_modules/@create-figma-plugin/utilities/lib/nodes/collapse-layer.js\n\n/**\n * Collapses `node` and all its child nodes in the layer list.\n *\n * @category Node\n */\n\nfunction collapseLayer(node) {\n  let didChange = false;\n  traverseNode(node, function (node) {\n    if ('expanded' in node && node.expanded === true) {\n      node.expanded = false;\n      didChange = true;\n    }\n  });\n  return didChange;\n}\n// CONCATENATED MODULE: ./src/organize-layers/utilities/arrange-groups.js\nfunction arrangeGroups(groups, horizontalSpace, verticalSpace) {\n  let x = 0;\n\n  for (const group of groups) {\n    let y = 0;\n    let maxWidth = 0;\n\n    for (const {\n      id\n    } of group.layers) {\n      const layer = figma.getNodeById(id);\n      layer.x = x;\n      layer.y = y;\n      y = layer.y + layer.height + verticalSpace;\n      maxWidth = Math.max(maxWidth, layer.width);\n    }\n\n    x += maxWidth + horizontalSpace;\n  }\n}\n// EXTERNAL MODULE: ./src/organize-layers/utilities/group-layers.js + 1 modules\nvar group_layers = __webpack_require__(9);\n\n// CONCATENATED MODULE: ./src/organize-layers/utilities/organize-layers.js\n\n\n\nfunction organizeLayers(layers, combineSingleLayerGroups, groupDefinition, horizontalSpace, verticalSpace) {\n  const groups = Object(group_layers[\"a\" /* groupLayers */])(layers, combineSingleLayerGroups, groupDefinition);\n  arrangeGroups(groups, horizontalSpace, verticalSpace);\n  updateSortOrder(groups);\n  collapseLayers(layers);\n}\n\nfunction updateSortOrder(groups) {\n  const layers = [];\n\n  for (const group of groups.slice().reverse()) {\n    for (const layer of group.layers.slice().reverse()) {\n      layers.push(layer);\n    }\n  }\n\n  updateNodesSortOrder(layers);\n}\n\nfunction collapseLayers(layers) {\n  for (const layer of layers) {\n    collapseLayer(layer);\n  }\n}\n// CONCATENATED MODULE: ./src/organize-layers/main.js\nvar __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\n\n\n\n\n/* harmony default export */ var main = __webpack_exports__[\"default\"] = (function () {\n  return __awaiter(this, void 0, void 0, function* () {\n    const layers = getLayers();\n\n    if (layers.length === 0) {\n      figma.closePlugin(formatErrorMessage('No layers on page'));\n      return;\n    }\n\n    const settings = yield Object(lib_settings[\"a\" /* loadSettingsAsync */])(default_settings[\"a\" /* defaultSettings */]);\n    figma.on('selectionchange', function () {\n      const layers = getLayers();\n      Object(events[\"emit\"])('SELECTION_CHANGED', {\n        layers,\n        maximumGroupDefinition: computeMaximumGroupDefinition(layers)\n      });\n    });\n    Object(events[\"once\"])('SUBMIT', function (settings) {\n      return __awaiter(this, void 0, void 0, function* () {\n        yield Object(lib_settings[\"b\" /* saveSettingsAsync */])(settings);\n        const {\n          combineSingleLayerGroups,\n          groupDefinition,\n          horizontalSpace,\n          verticalSpace\n        } = settings;\n        const layers = figma.currentPage.children.slice();\n        organizeLayers(layers, combineSingleLayerGroups, groupDefinition, horizontalSpace, verticalSpace);\n        figma.viewport.scrollAndZoomIntoView(layers);\n        setRelaunchButton(figma.currentPage, 'organizeLayers');\n        figma.closePlugin(formatSuccessMessage(\"Organized \" + layers.length + \" \" + pluralize(layers.length, 'layer') + \" on page\"));\n      });\n    });\n    Object(events[\"once\"])('CLOSE_UI', function () {\n      figma.closePlugin();\n    });\n    showUI({\n      height: 361,\n      width: 240\n    }, Object.assign(Object.assign({}, settings), {\n      layers,\n      maximumGroupDefinition: computeMaximumGroupDefinition(layers)\n    }));\n  });\n});\n\nfunction getLayers() {\n  return extractAttributes(figma.currentPage.children.slice(), ['id', 'name']);\n}\n\n/***/ }),\n\n/***/ 25:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n    __webpack_require__(16);\n    const modules = {'organize-layers/main--default':__webpack_require__(19)['default'],'reset-plugin/main--default':__webpack_require__(26)['default'],'organizeLayers':__webpack_require__(19)['default']};\n    const commandId = (figma.command === '' || false) ? 'organize-layers/main--default' : figma.command;\n    modules[commandId]();\n  \n\n/***/ }),\n\n/***/ 26:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _create_figma_plugin_utilities__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(42);\n/* harmony import */ var _utilities_default_settings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(14);\nvar __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (function () {\n  return __awaiter(this, void 0, void 0, function* () {\n    yield Object(_create_figma_plugin_utilities__WEBPACK_IMPORTED_MODULE_0__[/* saveSettingsAsync */ \"b\"])(_utilities_default_settings__WEBPACK_IMPORTED_MODULE_1__[/* defaultSettings */ \"a\"]);\n    figma.closePlugin('Reset plugin');\n  });\n});\n\n/***/ }),\n\n/***/ 4:\n/***/ (function(module, exports) {\n\n/*\n * @version    1.4.0\n * @date       2015-10-26\n * @stability  3 - Stable\n * @author     Lauri Rooden (https://github.com/litejs/natural-compare-lite)\n * @license    MIT License\n */\nvar naturalCompare = function (a, b) {\n  var i,\n      codeA,\n      codeB = 1,\n      posA = 0,\n      posB = 0,\n      alphabet = String.alphabet;\n\n  function getCode(str, pos, code) {\n    if (code) {\n      for (i = pos; code = getCode(str, i), code < 76 && code > 65;) ++i;\n\n      return +str.slice(pos - 1, i);\n    }\n\n    code = alphabet && alphabet.indexOf(str.charAt(pos));\n    return code > -1 ? code + 76 : (code = str.charCodeAt(pos) || 0, code < 45 || code > 127) ? code : code < 46 ? 65 // -\n    : code < 48 ? code - 1 : code < 58 ? code + 18 // 0-9\n    : code < 65 ? code - 11 : code < 91 ? code + 11 // A-Z\n    : code < 97 ? code - 37 : code < 123 ? code + 5 // a-z\n    : code - 63;\n  }\n\n  if ((a += \"\") != (b += \"\")) for (; codeB;) {\n    codeA = getCode(a, posA++);\n    codeB = getCode(b, posB++);\n\n    if (codeA < 76 && codeB < 76 && codeA > 66 && codeB > 66) {\n      codeA = getCode(a, posA, posA);\n      codeB = getCode(b, posB, posA = i);\n      posB = i;\n    }\n\n    if (codeA != codeB) return codeA < codeB ? -1 : 1;\n  }\n  return 0;\n};\n\ntry {\n  module.exports = naturalCompare;\n} catch (e) {\n  String.naturalCompare = naturalCompare;\n}\n\n/***/ }),\n\n/***/ 42:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return loadSettingsAsync; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return saveSettingsAsync; });\nconst KEY = 'settings';\n/**\n * Loads your plugin’s `settings` (stored locally on the user’s computer).\n * Values in `settings` default to an optional `defaultSettings` object.\n *\n * @category Settings\n */\n\nasync function loadSettingsAsync(defaultSettings) {\n  const settings = await figma.clientStorage.getAsync(KEY);\n\n  if (typeof settings === 'undefined') {\n    return defaultSettings;\n  }\n\n  return Object.assign(defaultSettings, settings);\n}\n/**\n * Saves the given `settings` for your plugin (stored locally on the user’s\n * computer).\n *\n * @category Settings\n */\n\nasync function saveSettingsAsync(settings) {\n  await figma.clientStorage.setAsync(KEY, settings);\n}\n\n/***/ }),\n\n/***/ 8:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.extractGroupName = void 0;\n\nfunction extractGroupName(layerName, groupDefinition) {\n  if (layerName === '/') {\n    return '/';\n  }\n\n  const split = splitBySlash(layerName);\n\n  if (split.length === 1) {\n    return layerName;\n  }\n\n  if (split.length <= groupDefinition) {\n    return split.slice(0, split.length - 1).join('/');\n  }\n\n  return split.slice(0, groupDefinition).join('/');\n}\n\nexports.extractGroupName = extractGroupName;\nconst slashRegex = /\\//;\n\nfunction splitBySlash(string) {\n  const trimmed = string[string.length - 1] === '/' ? string.substring(0, string.length - 1) : string;\n  return trimmed.split(slashRegex);\n}\n\n/***/ }),\n\n/***/ 9:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"a\", function() { return /* binding */ groupLayers; });\n\n// EXTERNAL MODULE: /Users/zhangruisheng/Desktop/figamxx/node_modules/natural-compare-lite/index.js\nvar natural_compare_lite = __webpack_require__(4);\nvar natural_compare_lite_default = /*#__PURE__*/__webpack_require__.n(natural_compare_lite);\n\n// CONCATENATED MODULE: /Users/zhangruisheng/Desktop/figamxx/node_modules/@create-figma-plugin/utilities/lib/nodes/sort-nodes/sort-nodes-by-name.js\n\n/**\n * Sorts `nodes` in alphabetical order. Does not modify the original\n * `nodes` array.\n *\n * @returns Returns a new array of `SceneNode` objects.\n * @category Node\n */\n\nfunction sortNodesByName(nodes) {\n  if (nodes.length < 2) {\n    return nodes.slice();\n  }\n\n  return nodes.slice().sort(function (a, b) {\n    const aName = a.name.toLowerCase();\n    const bName = b.name.toLowerCase();\n\n    if (aName !== bName) {\n      return natural_compare_lite_default()(bName, aName);\n    }\n\n    const y = b.y - a.y;\n\n    if (y !== 0) {\n      return y;\n    }\n\n    const x = b.x - a.x;\n\n    if (x !== 0) {\n      return x;\n    }\n\n    return natural_compare_lite_default()(b.id, a.id);\n  });\n}\n// EXTERNAL MODULE: ./src/organize-layers/utilities/extract-group-name.js\nvar extract_group_name = __webpack_require__(8);\n\n// CONCATENATED MODULE: ./src/organize-layers/utilities/group-layers.js\n\n\nfunction groupLayers(layers, combineSingleLayerGroups, groupDefinition) {\n  const groups = {};\n\n  for (const layer of sortNodesByName(layers).reverse()) {\n    const groupName = Object(extract_group_name[\"extractGroupName\"])(layer.name, groupDefinition);\n\n    if (typeof groups[groupName] === 'undefined') {\n      groups[groupName] = {\n        groupName,\n        layers: []\n      };\n    }\n\n    groups[groupName].layers.push(layer);\n  }\n\n  if (combineSingleLayerGroups === false || countSingleLayerGroups(groups) < 2) {\n    return Object.values(groups);\n  }\n\n  const result = [];\n  const singleLayers = {\n    groupName: null,\n    layers: []\n  };\n\n  for (const groupName in groups) {\n    const group = groups[groupName];\n\n    if (group.layers.length === 1) {\n      singleLayers.layers.push(group.layers[0]);\n      continue;\n    }\n\n    result.push(group);\n  }\n\n  return [singleLayers, ...result];\n}\n\nfunction countSingleLayerGroups(groups) {\n  let count = 0;\n\n  for (const groupName in groups) {\n    const group = groups[groupName];\n\n    if (group.layers.length === 1) {\n      count++;\n    }\n  }\n\n  return count;\n}\n\n/***/ })\n\n/******/ });","inputSourceMap":null}